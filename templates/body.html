<!-- Main Content -->
<main id="main-content" class="flex-1 overflow-y-scroll">
  <h1 class="text-2xl font-bold">Home</h1>
  <p class="mt-2">Welcome to the home page.</p>
</main>

<!-- Tabs -->
<div
  id="tabs-bar"
  class="hidden border-t border-gray-300 bg-white px-4 py-2 flex space-x-2"
>
  <!-- Tabs go here -->
</div>

<!-- class="flex justify-between items-center px-4 py-2 border-t bg-white text-sm relative h-12 shrink-0" -->
<footer
  class="w-full p-4 flex justify-between items-center border-t bg-white text-sm relative"
>
  <!-- Footer info, always shown (but truncated if needed) -->
  <div id="footer-info" class="truncate ml-2 flex-1">
    Currently viewing: Home
  </div>

  <!-- Language and help -->
  <div class="flex items-center space-x-2">
    <span id="language">[en]</span>

    <button id="help-button" class="text-lg" onclick="toggleModal()">?</button>
    <!-- Hamburger (mobile only) -->
    <button id="hamburger" class="text-2xl" onclick="toggleActionMenu()">
      &#9776;
    </button>
  </div>
</footer>

<!-- Floating Action Menu (Desktop only) -->
<div
  id="action-menu"
  class="hidden fixed right-0 bottom-12 border rounded-tl shadow-lg p-4 space-y-2 z-10 bg-gray-400 p-1.5 box-border"
>
  <div class="relative border-2 border-black p-5 bg-gray-400 box-border">
    <div
      class="absolute top-0 left-4 -translate-y-1/2 bg-gray-400 px-2 font-bold text-sm"
    >
      Menu
    </div>
    <div onclick="openTab('Dictionary')" class="my-1.5">Dictionary</div>
    <div onclick="openTab('Document')" class="my-1.5">Document</div>
    <div onclick="openTab('Conversation')" class="my-1.5">Conversation</div>
    <div onclick="openTab('Video')" class="my-1.5">Video</div>
  </div>
</div>

<!-- Mobile Menu -->
<div
  id="mobile-menu"
  class="fixed inset-0 bg-white z-50 hidden flex flex-col p-6"
>
  <div class="flex items-center justify-between mb-4">
    <button onclick="toggleActionMenu()" class="text-2xl font-bold">
      &lt;
    </button>
    <span class="text-lg font-semibold">Menu</span>
  </div>
  <button
    onclick="openTab('Dictionary'); toggleActionMenu()"
    class="mb-2 text-left"
  >
    Open Dictionary
  </button>
  <button
    onclick="openTab('Document'); toggleActionMenu()"
    class="mb-2 text-left"
  >
    Open Document
  </button>
  <button
    onclick="openTab('Conversation'); toggleActionMenu()"
    class="mb-2 text-left"
  >
    Open Conversation
  </button>
  <button onclick="openTab('Video'); toggleActionMenu()" class="mb-2 text-left">
    Open Video
  </button>
</div>

<!-- Shortcut Modal -->
<div
  id="shortcut-modal"
  class="fixed inset-0 flex items-center justify-center hidden z-50"
>
  <div class="bg-white p-6 rounded shadow-lg w-96">
    <h2 class="text-lg font-semibold mb-4">Keyboard Shortcuts</h2>
    <table class="w-full text-sm border">
      <tr class="border-b">
        <td class="py-1 px-2 font-mono">?</td>
        <td class="py-1 px-2">Show shortcuts</td>
      </tr>
      <tr class="border-b">
        <td class="py-1 px-2 font-mono">Space</td>
        <td class="py-1 px-2">Open action menu</td>
      </tr>
      <tr>
        <td class="py-1 px-2 font-mono">X</td>
        <td class="py-1 px-2">Close tab</td>
      </tr>
    </table>
    <button
      onclick="toggleModal()"
      class="mt-4 px-4 py-1 bg-blue-600 text-white rounded"
    >
      Close
    </button>
  </div>
</div>

<!-- JavaScript -->
<script>
  const mainContent = document.getElementById("main-content");
  const footerInfo = document.getElementById("footer-info");
  const tabsBar = document.getElementById("tabs-bar");
  const shortcutModal = document.getElementById("shortcut-modal");
  const actionMenu = document.getElementById("action-menu");
  const mobileMenu = document.getElementById("mobile-menu");

  let tabs = [];

  function setContent(type) {
    mainContent.innerHTML = `<h1 class="text-2xl font-bold">${type}</h1><p class="mt-2">This is the ${type.toLowerCase()} view.</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p><p>MMMMMM</p>`;
    footerInfo.textContent = `Currently viewing: ${type}`;
  }

  function openTab(type) {
    if (type === "Home") {
      tabsBar.classList.add("hidden");
      tabs = [];
      tabsBar.innerHTML = "";
      setContent("Home");
      return;
    }

    if (!tabs.includes(type)) {
      tabs.push(type);
      const tab = document.createElement("div");
      tab.className =
        "bg-gray-200 px-3 py-1 rounded flex items-center space-x-2";
      tab.innerHTML = `<span>${type}</span> <button class="text-red-500" onclick="event.stopPropagation(); closeTab('${type}')">X</button>`;
      tab.onclick = () => switchTab(type);
      tabsBar.appendChild(tab);
      tabsBar.classList.remove("hidden");
    }

    switchTab(type);
  }

  function switchTab(type) {
    setContent(type);
  }

  function closeTab(type) {
    tabs = tabs.filter((t) => t !== type);
    const tabDivs = tabsBar.querySelectorAll("div");
    tabDivs.forEach((div) => {
      if (div.textContent.includes(type)) {
        div.remove();
      }
    });

    if (tabs.length === 0) {
      openTab("Home");
    } else {
      switchTab(tabs[tabs.length - 1]);
    }
  }

  function toggleModal() {
    shortcutModal.classList.toggle("hidden");
  }

  function toggleActionMenu() {
    actionMenu.classList.toggle("hidden");
  }

  // Keyboard handlers
  document.addEventListener("keydown", (e) => {
    if (e.key === "?") {
      e.preventDefault();
      toggleModal();
    }
    if (e.key === " ") {
      e.preventDefault();
      toggleActionMenu();
    }
  });

  // Initial view
  openTab("Home");
</script>
