<body class="flex flex-col min-h-screen bg-gray-50">

  <!-- Header (floating on small screens, fixed on desktop) -->
  <header 
    x-ref="header"
    x-bind:class="{
      'fixed top-0 left-0 right-0 z-50': true,
      'translate-y-0': !isHidden,
      '-translate-y-full': isHidden
    }"
    class="transition-transform duration-300 ease-in-out bg-blue-600 text-white p-4 flex justify-between items-center"
  >
    <h1 class="text-xl font-bold">My Website</h1>

    <!-- Desktop Nav -->
    <nav class="hidden md:flex space-x-6">
      <a href="#" class="hover:underline">Home</a>
      <a href="#" class="hover:underline">About</a>
      <a href="#" class="hover:underline">Services</a>
      <a href="#" class="hover:underline">Contact</a>
    </nav>

    <!-- Hamburger Icon -->
    <button @click="open = !open" class="md:hidden focus:outline-none">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2"
           viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
        <path d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>
  </header>

  <!-- Mobile Sidebar -->
  <div x-show="open" x-cloak class="fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden" @click="open = false"></div>
  <aside x-show="open" x-cloak class="fixed top-0 left-0 h-full w-64 bg-white shadow-lg z-50 transform transition-transform duration-300 md:hidden"
         :class="{ '-translate-x-0': open, '-translate-x-full': !open }">
    <div class="p-4 border-b flex justify-between items-center">
      <h2 class="text-lg font-semibold">Menu</h2>
      <button @click="open = false" class="text-gray-500 hover:text-black">âœ•</button>
    </div>
    <nav class="p-4 space-y-4">
      <a href="#" class="block text-gray-700 hover:underline">Home</a>
      <a href="#" class="block text-gray-700 hover:underline">About</a>
      <a href="#" class="block text-gray-700 hover:underline">Services</a>
      <a href="#" class="block text-gray-700 hover:underline">Contact</a>
    </nav>
  </aside>

  <!-- Main content -->
  <main class="flex-1 pt-20 md:pt-24 px-4 pb-24" @scroll.window="handleScroll">
    <div class="max-w-3xl mx-auto space-y-8">
      <h2 class="text-2xl font-bold">Welcome</h2>
      <p>Scroll down to hide the header. Scroll up to reveal it. On mobile, it's a floating bar. On desktop, it's fixed at the top.</p>
      <!-- Dummy content to allow scrolling -->
      <template x-for="i in 50" :key="i">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer nec odio. Praesent libero. Sed cursus ante dapibus diam.</p>
      </template>
    </div>
  </main>

  <!-- Footer -->
  <footer class="bg-gray-200 text-center p-4 md:fixed bottom-0 left-0 right-0">
    &copy; 2025 My Website. All rights reserved.
  </footer>

  <!-- Alpine.js Logic -->
  <script>
    function layout() {
      return {
        open: false,
        isHidden: false,
        lastScrollY: window.scrollY,
        init() {
          window.addEventListener('resize', this.handleResize.bind(this));
        },
        handleResize() {
          if (window.innerWidth >= 768) {
            this.isHidden = false;
          }
        },
        handleScroll() {
          const currentScroll = window.scrollY;
          const isMobile = window.innerWidth < 768;

          if (!isMobile) return;

          if (currentScroll > this.lastScrollY + 5) {
            // Scroll down
            this.isHidden = true;
          } else if (currentScroll < this.lastScrollY - 5) {
            // Scroll up
            this.isHidden = false;
          }

          this.lastScrollY = currentScroll;
        }
      };
    }
  </script>

</body>
